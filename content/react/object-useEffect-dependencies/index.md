---
title: 'React: useEffectì˜ ì˜ì¡´ì„± ë°°ì—´(dependency array)ì—ì„œ ê°ì²´ ì²˜ë¦¬í•˜ê¸°'
category: react
date: 2023-03-19
tags:
  - ì˜ì¡´ì„±ë°°ì—´
  - useEffect
  - object
---

# ë“¤ì–´ê°€ë©°

ìš°ë¦¬ê°€ Reactë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ìƒíƒœë¡œ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ìˆë‹¤. íŠ¹íˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë³µì¡ì„±ì´ ì¦ê°€í•˜ë©´ì„œ í•œ ê°œì˜ ìƒíƒœë¡œ ì—¬ëŸ¬ ê°’ì„ ê´€ë¦¬í•´ì•¼ í•  ë•Œ, ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ê½¤ íš¨ìœ¨ì ì¸ ë°©ë²•ì¼ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ë°©ì‹ì´ `useEffect`ì™€ ê°™ì€ í›…ì— ì ìš©ë  ë•Œ, ì•½ê°„ì˜ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.

`useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœ í›„ì— ì˜ì¡´ì„± ë°°ì—´ì„ í†µí•´ ì–´ë–¤ ê°’ì˜ ë³€í™”ì— ë°˜ì‘í•  ê²ƒì¸ì§€ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ì´ ì˜ì¡´ì„± ë°°ì—´ì— ê°ì²´, ë°°ì—´ ë“±ì„ ë„£ê²Œ ë˜ë©´, ìš°ë¦¬ì˜ ê¸°ëŒ€ì™€ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ë™ì‘ì„ ë³´ì¼ ë•Œê°€ ìˆë‹¤.

JavaScriptì—ì„œ ê°ì²´ëŠ” **ì°¸ì¡°ê°’(ë©”ëª¨ë¦¬ ì£¼ì†Œ)ì„ ë¹„êµ**í•œë‹¤. ë”°ë¼ì„œ ê°ì²´ì˜ ì†ì„±ì´ ëª¨ë‘ ê°™ë”ë¼ë„, ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì €ì¥ë˜ì–´ ìˆìœ¼ë©´ ë‹¤ë¥¸ ê°ì²´ë¡œ íŒë‹¨í•œë‹¤.

```js
const prev_obj = { count: 0 };
const new_obj = { count: 0 };

console.log(prev_obj === new_obj); // false
```

ë°˜ëŒ€ë¡œ ê°ì²´ì˜ ì†ì„± ê°’ì´ ë³€í™”í•´ë„ **ì°¸ì¡° ì£¼ì†Œê°€ ë³€í•˜ì§€ ì•ŠëŠ” í•œ** ì´ë¥¼ ê°™ì€ ê°ì²´ë¡œ ë³´ê³ , `useEffect`ëŠ” ë³€í™”ë¥¼ ê°ì§€í•˜ì§€ ëª»í•˜ê²Œ ëœë‹¤. ì´ëŠ” ì½”ë“œì˜ ë™ì‘ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê²Œ ë§Œë“¤ê³ , ì´ë¡œ ì¸í•´ ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ useEffectì—ì„œ ê°ì²´ë¥¼ ì²˜ë¦¬í•  ë•Œ ë‹¤ì–‘í•œ ìƒí™©ì„ ë§ˆì£¼í•  ìˆ˜ ìˆëŠ”ë°, ì´ ê¸€ì—ì„œëŠ” ë¬¸ì œ ìƒí™©ë“¤ê³¼ useEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ê°ì²´ë¥¼ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ ë°©ë²•ì„ ì†Œê°œí•˜ë ¤ê³  í•œë‹¤. ì´ë¥¼ í†µí•´ ë³´ë‹¤ ì•ˆì •ì ì´ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ React ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.

# ê°ì²´ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì„ ë•Œ

ì»´í¬ë„ŒíŠ¸ëŠ” ëŸ°ë”ë§ í• ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì´ë‹¤. ìƒˆë¡œìš´ ê°ì²´ê°€ ì´ì „ ê°ì²´ì™€ ê°™ì€ ì†ì„±ê³¼ ê°’ì„ ê°€ì¡Œë”ë¼ë„ ì´ì „ ê°ì²´ì™€ëŠ” ë‹¤ë¥¸ ì°¸ì¡°ë¥¼ ê°€ì§€ê²Œ ëœë‹¤. ì¦‰, ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì €ì¥ë˜ë¯€ë¡œ ê°™ì€ ê°ì²´ê°€ ì•„ë‹ˆë¼ê³  íŒë‹¨í•œë‹¤. ë”°ë¼ì„œ ì´ëŸ° ê°ì²´(ì°¸ì¡°íƒ€ì…)ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ìœ¼ë©´, ì˜ì¡´ì„±ì´ ë°”ë€ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ì–´ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì½œë°± í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê²Œ ëœë‹¤.

```js
const ChildComponent = ({ obj }) => {
  useEffect(() => {
    console.log('This will be logged on every render');
  }, [obj]);

  return <div>{obj.count}</div>;
};
```

ì´ëŸ° ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì˜ì¡´ì„± ë°°ì—´ì— ê°ì²´ë¥¼ ë„£ì§€ ì•Šìœ¼ë©´ ëœë‹¤ğŸ˜

ì˜ì¡´ì„± ë°°ì—´ì— ê°ì²´ë¥¼ ë„£ì§€ ì•Šê³ , ê°ì²´ì˜ ì†ì„± ê°’ ì¤‘ **ì›ì‹œ íƒ€ì…ì˜ ê°’**ì„ ë„£ëŠ”ë‹¤ë©´, **ì›ì‹œ íƒ€ì…ì˜ ê°’ì€ ê°’ ìì²´ë¥¼ ë¹„êµí•˜ê¸° ë•Œë¬¸ì—** ì´ ì›ì‹œ ê°’ì´ ë³€í•˜ì§€ ì•ŠëŠ” í•œ ì½œë°± í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.

```js
const ChildComponent = ({ obj }) => {
  useEffect(() => {
    console.log('This will only be logged when `obj.count` changes');
  }, [obj.count]);

  return <div>{obj.count}</div>;
};
```

# ê°ì²´ ìƒì„± ì—°ì‚°ì´ ë³µì¡í•œ ê²½ìš°

ê°ì²´ë‚˜ ë°°ì—´ì„ ë§Œë“œëŠ”ë° ë“œëŠ” ë¹„ìš©ì´ í° ê²½ìš°ê°€ ìˆë‹¤ë©´, ë§¤ ë Œë”ë§ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ëŠ” ê²ƒì€ ì„±ëŠ¥ì— ì¢‹ì§€ ì•Šë‹¤.

ì´ë•Œ í•´ê²° ë°©ë²•ì€ ê°ì²´ë¥¼ `Memoization` í•˜ëŠ” ê²ƒì´ë‹¤. **Memoization**ì´ë€, í•¨ìˆ˜ì˜ ë°˜í™˜ê°’ì„ ìºì‹œí•˜ì—¬ ë™ì¼í•œ ì¸ìê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ, ì´ì „ì— ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì´ë¥¼ í†µí•´ ë¶ˆí•„ìš”í•œ ê³„ì‚°ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” `useMemo`ë‚˜ `useCallback`ê³¼ ê°™ì€ í›…ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```js
const [obj, setObj] = useState({ count: 0, flag: false });

const memoizedObj = useMemo(
  () => generateObject({ count: 0, flag: false }),
  [count, flag],
);

useEffect(() => {
  console.log('This will only be logged when `memoizedObj` changes');
}, [memoizedObj]);
```

ìœ„ ì½”ë“œì—ì„œ `memoizedObj`ëŠ” countì™€ flagì˜ ë³€í™”ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë‹¤. ì´ë“¤ì— ë³€ê²½ì´ ìˆë‹¤ë©´, `memoizedObj`ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë°˜í™˜í•˜ê²Œ ë˜ê³ , ì´ëŠ” ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ì§€ê²Œ ëœë‹¤. ë”°ë¼ì„œ `useEffect`ëŠ” ì´ë¥¼ ìƒˆë¡œìš´ ê°ì²´ë¡œ ì¸ì‹í•˜ê³ , ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ëœë‹¤.

# ì°¸ê³ 

- [Object & array dependencies in the React useEffect Hook](https://www.benmvp.com/blog/object-array-dependencies-react-useEffect-hook/)
- [React useEffect ì˜ dependency array](https://sgwanlee.medium.com/useeffect%EC%9D%98-dependency-array-ebd15f35403a)
